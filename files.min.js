function stripHtml(e){let t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function download_txt(){var e=stripHtml(document.getElementById("fileContents").innerText);if(document.getElementById("encryptme").checked){var t=localStorage.getItem("papEkey");console.log(t),encrypt(e,t).then(e=>{console.log("encrypted text in B64 is: "+e),console.log("password is: "+t);var n=document.createElement("a");n.href="data:text/plain,"+e,n.target="_blank",n.download=document.getElementById("fileName").innerText,n.click()}).catch(e=>{console.log(e)})}else{var n=document.createElement("a");n.href="data:text/plain,"+e,n.target="_blank",n.download=document.getElementById("fileName").innerText,n.click()}}function isBase64(e){try{return btoa(atob(e))==e}catch(e){return!1}}var md="files/help.md",mu="files/help.csv",tt="Markdown Viewer",splashscr="<div><h1>Welcome to the splash screen</h1><p>Tell your customers what you want</div>";splashscr="",document.getElementById("footer").innerText="",document.getElementById("splash").innerHTML=splashscr,""===localStorage.getItem("pap")&&(localStorage.clear("pap"),document.getElementById("footer").innerHTML="&larr; Click Settings"),""===localStorage.getItem("papIndex")&&(localStorage.clear("papIndex"),document.getElementById("footer").innerHTML="&larr; Click Settings"),localStorage.hasOwnProperty("pap")&&null!==localStorage.getItem("pap")?md=localStorage.getItem("pap"):localStorage.setItem("pap",md),localStorage.hasOwnProperty("papIndex")?mu=localStorage.getItem("papIndex"):localStorage.setItem("papIndex",mu),localStorage.hasOwnProperty("logo")&&(lg=localStorage.getItem("logo"),document.getElementById("logo").innerHTML="<image class='logo' src='"+lg+"' />");const thetitle=tt;document.getElementById("tit").innerText=thetitle;const fileInput=document.getElementById("fileInput"),fileContents=document.getElementById("fileContents");fileInput.addEventListener("change",function(){const e=fileInput.files[0],t=new FileReader;t.addEventListener("load",function(){fileContents.textContent=t.result,document.getElementById("savecontainer").classList.remove("hide")}),t.readAsText(e)});const thefileInput=document.getElementById("fileInput"),fileName=document.getElementById("fileName");thefileInput.addEventListener("change",()=>{fileName.textContent=thefileInput.files[0].name}),document.getElementById("downwego").addEventListener("click",download_txt);